G91

;########### Variables For Functions ########################

DVAR $comport
DVAR $found, $floor $delta $deltafast $Ax $Ay $Bx $By $Cx $Cy $Dx $Dy $Px $Py $posA $posB $posC $posD $posZ $fastfeed $midfeed $slowfeed $Astart $Bstart $Cstart $Dstart $Pstart $comma1 $comma2 $comma1plus $comma2plus
DVAR $Ax_dif $Ay_dif $Bx_dif $By_dif $Cx_dif $Cy_dif $Dx_dif $Dy_dif $Px_dif $Py_dif $zo_ref $nozzles $set_home $reference_nozzle 
DVAR $nozzle $nozzleA $nozzleB $nozzleC $nozzleD $profilometerRod $xStart $yStart $zStart 
DVAR $zMeasureA $zMeasureB $zMeasureC $zMeasureD $Az_dif $Bz_dif $Cz_dif $Dz_dif $xOffset $yOffset
DVAR $zA $zB $zC $zD $check
DVAR $zSweepRange $zSweepStep $numsteps $tempdistance $zDwell $count $z_dif $z_past $z_num $indicator $step $start $x_dist
DVAR $align_save
DVAR $comma1 $comma2 $comma3 $comma4 $comma1plus $comma2plus $comma3plus $comma1min $comma3min $alignment_file

;########### Duel Material Pressure ########################
DVAR $COM 
DVAR $COM2
DVAR $linepressure1 ; Pressure in PSI
DVAR $linepressure2 ; Pressure in PSI

;########### ??? very important ??? ########################
DVAR $heighta
DVAR $heightb
DVAR $heightc
DVAR $heightd



DVAR $hFile        
DVAR $cCheck
DVAR $press
DVAR $length
DVAR $lame  

DVAR $COM
DVAR $pressure
DVAR $moveSpeed
DVAR $printSpeedXY
DVAR $printSpeedZ
DVAR $printHeight
DVAR $edgeLength
Primary
FILECLOSE

$COM=9
$pressure=85

; Below, we call several required GCode commands; these commands begin with a G:
G71            ; Standard GCode command for metric units
G76            ; Standard GCode command for time base seconds
G68            
G65 F3000        ; Sets an acceleration speed in mm/s^2
G66 F3000        ; Sets a deceleration speed in mm/s^2

; The “ENABLE” command allows us to enable axes on the printer; this is required for printing
ENABLE X Y A B C D U     ; enables all the axis 


Incremental                ; “Incremental” tells the printer to referring to relative coordinates



$DO0.0=0
$DO1.0=0
$DO2.0=0
$DO3.0=0
Call togglePress P$COM  ; Turns on/off pressure box for A

; Below, we call several required GCode commands; these commands begin with a G:
G71            ; Standard GCode command for metric units
G76            ; Standard GCode command for time base seconds
G68            
G65 F3000        ; Sets an acceleration speed in mm/s^2
G66 F3000        ; Sets a deceleration speed in mm/s^2

; The “ENABLE” command allows us to enable axes on the printer; this is required for printing
ENABLE X Y A B C D U     ; enables all the axis 


Incremental                ; “Incremental” tells the printer to referring to relative coordinates


;############### User Code################################

G90
POSOFFSET CLEAR A ; clear all position offsets and work coordinates.
F20
G1 z-54.360000
F20

G92 X0 Y0 z4 ; set the current position as the absolute work coordinate zero origin
F20
G4 P0.2
F0.5
G1 z4.000000
F20
F20
 ; ready to print
G1 X49.266667 Y-61.000000
G91
G1 X-0.000000 Y4.500000
; Change Tools from A to B.
G1 X(($Bx-$Ax-($Bx_dif-$Ax_dif))) F20
G1 Y(($Ay-$By+($Ay_dif-$By_dif)))
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F0.5
G4 P1
G1 X-0.000000 Y6.000000
G4 P1
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F0.5
F20
; Change Tools from B to A.
G1 X(($Ax-$Bx-($Ax_dif-$Bx_dif))) F20
G1 Y(($By-$Ay+($By_dif-$Ay_dif)))
G1 X0.000000 Y-5.500000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
G4 P1
F0.5
G1 X0.000000 Y-3.000000
F1.5
G1 X0.000000 Y-2.000000
G4 P1
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F1.5
F20
G90
G1 X52.000000 Y-41.000000
G91


; PRINT A VALVE rotation = 3.14159265359.
G1 X0.875000 Y1.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-4.200000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1
G1 X-0.000000 Y-2.000000
G1 X-0.350000 Y0.000000
G1 X0.000000 Y2.000000
G1 X-0.350000 Y0.000000
G1 X-0.000000 Y-2.000000
G1 X-0.350000 Y0.000000
G1 X0.000000 Y2.000000
G1 X-0.350000 Y0.000000
G1 X-0.000000 Y-2.000000
G1 X-0.350000 Y0.000000
G1 X0.000000 Y1.000000
F1.5
G1 X-2.125000 Y0.000000
G1 X-0.000000 Y-3.000000
F1.5
G1 X-0.000000 Y-2.000000
F0.5
G1 X-0.000000 Y-3.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F0.5
F20
G1 X3.000000 Y11.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F1.5
G1 X-0.000000 Y-2.300000
F2
G1 X-0.750000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-0.750000 Y0.000000
F1.5
G1 X-0.000000 Y-2.300000
F1.5
G1 X-0.000000 Y-2.000000
F0.5
G1 X-0.000000 Y-3.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F0.5
F20
G1 X-1.875000 Y8.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-4.200000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.25
G1 z0.780000
F1.5
G1 X1.000000 Y-0.000000
F1
G1 X0.000000 Y1.000000
G1 X0.350000 Y-0.000000
G1 X-0.000000 Y-2.000000
G1 X0.350000 Y-0.000000
G1 X0.000000 Y2.000000
G1 X0.350000 Y-0.000000
G1 X-0.000000 Y-2.000000
G1 X0.350000 Y-0.000000
G1 X0.000000 Y2.000000
G1 X0.350000 Y-0.000000
G1 X-0.000000 Y-2.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F1
F20
G90
G1 X52.000000 Y-38.000000
G91
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
G4 P2
G90
G1 X49.266667 Y-36.000000 z-3.810000
G91
G90
G1 Y-13.000000
G91
G90
G1 X45.800000
G91
F0.5
G90
G1 z0.100000
G91
F1.5
F20
F0.5
F0.5
G4 P0.2
F1.5
G1 X-12.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
F1.5
G1 X-4.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X55.000000 Y-41.000000


; PRINT A VALVE rotation = 3.14159265359.
G91
G1 X-0.875000 Y1.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-4.200000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1
G1 X-0.000000 Y-2.000000
G1 X0.350000 Y-0.000000
G1 X0.000000 Y2.000000
G1 X0.350000 Y-0.000000
G1 X-0.000000 Y-2.000000
G1 X0.350000 Y-0.000000
G1 X0.000000 Y2.000000
G1 X0.350000 Y-0.000000
G1 X-0.000000 Y-2.000000
G1 X0.350000 Y-0.000000
G1 X0.000000 Y1.000000
F1.5
G1 X2.125000 Y-0.000000
F1.5
G1 X-2.000000 Y0.000000
F0.5
G1 X-3.000000 Y0.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F0.5
F20
G1 X-3.000000 Y3.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F1.5
G1 X-0.000000 Y-2.300000
F2
G1 X0.750000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X1.500000 Y-0.000000
G1 X-0.000000 Y-0.175000
G1 X-1.500000 Y0.000000
G1 X-0.000000 Y-0.175000
G1 X0.750000 Y-0.000000
F1.5
G1 X-0.000000 Y-2.300000
F1.5
G1 X-0.000000 Y-2.000000
F0.5
G1 X-0.000000 Y-3.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F0.5
F20
G1 X1.875000 Y8.000000
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-4.200000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.25
G1 z0.780000
F1.5
G1 X-1.000000 Y0.000000
F1
G1 X0.000000 Y1.000000
G1 X-0.350000 Y0.000000
G1 X-0.000000 Y-2.000000
G1 X-0.350000 Y0.000000
G1 X0.000000 Y2.000000
G1 X-0.350000 Y0.000000
G1 X-0.000000 Y-2.000000
G1 X-0.350000 Y0.000000
G1 X0.000000 Y2.000000
G1 X-0.350000 Y0.000000
G1 X-0.000000 Y-2.000000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F1
F20
G90
G1 X55.000000 Y-38.000000
G91
F20
F20
G90
G1 z1.000000
G91
F20
F0.5
G90
G1 z-3.810000
G91
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
G4 P2
G90
G1 X57.733333 Y-36.000000 z-3.810000
G91
G90
G1 Y-13.000000
G91
G90
G1 X61.200000
G91
F0.5
G90
G1 z0.100000
G91
F1.5
F20
F0.5
G90
G1 z0.187000
G91
F0.5
G4 P0.2
F1.5
G1 X12.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
F1.5
G1 X4.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X49.266667 Y-20.000000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.5
G1 z-1.810000
F0.5
F1.5
G1 X61.200000
F20
F0.5
G1 z0.187000
F1.5
G4 P0.2
F1.5
G91
G1 X12.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
F1.5
G1 X4.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X57.733333 Y-23.500000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.5
G1 z-1.810000
F0.5
F1.5
G1 X45.800000
G1 Y-20.000000
F20
F0.5
G1 z0.100000
F1.5
G4 P0.2
F1.5
G91
G1 X-12.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
F1.5
G1 X-4.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X49.266667 Y-27.000000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
G1 X45.800000
F20
F0.5
G1 z0.100000
F1.5
G4 P0.2
F1.5
G91
G1 X-12.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
F1.5
G1 X-4.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X57.733333 Y-27.000000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
G1 X61.200000
F20
F0.5
G1 z0.187000
F1.5
G4 P0.2
F1.5
G91
G1 X12.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
F1.5
G1 X4.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X57.733333 Y-34.000000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.5
G1 z-1.810000
F0.5
F1.5
G1 X45.800000
F20
F0.5
G1 z0.100000
F1.5
G4 P0.2
F1.5
G91
G1 X-12.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
F1.5
G1 X-4.000000 Y0.000000
F3.375
G1 X-0.000000 Y-1.300000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-2.600000
G1 X-0.325000 Y2.600000
G1 X-0.000000 Y-1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X49.266667 Y-30.500000
F20
F20
G1 z1.000000
F20
F0.5
G1 z-3.810000
F20
G4 P0.2
Call togglePress P9
G4 P0.2
F1.5
F0.5
G1 z-1.810000
F0.5
F1.5
G1 X61.200000
G1 Y-34.000000
F20
F0.5
G1 z0.187000
F1.5
G4 P0.2
F1.5
G91
G1 X12.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
F1.5
G1 X4.000000 Y-0.000000
F3.375
G1 X0.000000 Y1.300000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y2.600000
G1 X0.325000 Y-2.600000
G1 X0.000000 Y1.300000
Call togglePress P9
G4 P0.2
G4 P0.2
F0.5
G90
G1 z4.000000
G91
F3.375
F20
G90
G1 X0.000000 Y0.000000 z4.000000

VELOCITY OFF

M2

;----------------------------------------------------------
; END OF CODE - Function definitions below
;----------------------------------------------------------
DFS setPress        
         
	$strtask1 = DBLTOSTR( $P, 0 )            
	$strtask1 = "COM" + $strtask1
	$hFile = FILEOPEN $strtask1, 2
	COMMINIT $hFile, "baud=115200 parity=N data=8 stop=1"
	COMMSETTIMEOUT $hFile, -1, -1, 1000
                             
	$press = $Q * 10.0                             
	$strtask2 = DBLTOSTR( $press , 0 )  
      
      
	$length = STRLEN( $strtask2 )      
	WHILE $length < 4.0
		$strtask2 = "0" + $strtask2    
		$length = STRLEN( $strtask2 ) 
	ENDWHILE

	$strtask2 = "08PS  " + $strtask2
                                    
	$cCheck = 0.00     
	$lame = STRTOASCII ($strtask2, 0)
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 1) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 2) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 3) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 4)
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 5) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 6) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 7) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 8) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 9)  
	$cCheck = $cCheck - $lame
                        
	WHILE( $cCheck) < 0
		$cCheck = $cCheck + 256
	ENDWHILE                        

	$strtask3 = makestring "{#H}" $cCheck   
	$strtask3 = STRUPR( $strtask3 )
	$strtask2 = "" + $strtask2 + $strtask3 + ""
            
	FILEWRITE $hFile ""
	FILEWRITE $hFile $strtask2
	FILEWRITE $hFile ""

	FILECLOSE $hFile

ENDDFS

DFS togglePress        
         
	$strtask1 = DBLTOSTR( $P, 0 )            
	$strtask1 = "COM" + $strtask1
	$hFile = FILEOPEN $strtask1, 2
	COMMINIT $hFile, "baud=115200 parity=N data=8 stop=1"
	COMMSETTIMEOUT $hFile, -1, -1, 1000

	$strtask2 = "04DI  "
                                    
	$cCheck = 0.00     
	$lame = STRTOASCII ($strtask2, 0)
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 1) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 2) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 3) 
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 4)
	$cCheck = $cCheck - $lame
	$lame = STRTOASCII( $strtask2, 5) 
	$cCheck = $cCheck - $lame
                        
	WHILE( $cCheck) < 0
		$cCheck = $cCheck + 256
	ENDWHILE                        

	$strtask3 = makestring "{#H}" $cCheck   
	$strtask3 = STRUPR( $strtask3 )
	$strtask2 = "" + $strtask2 + $strtask3 + ""
                  
	FILEWRITE $hFile ""
	FILEWRITE $hFile $strtask2
	FILEWRITE $hFile ""

	FILECLOSE $hFile

ENDDFS  
;----------------------------------------------------------
;----------------------------------------------------------
;----------------------------------------------------------


;########### Variables For Functions ########################

DVAR $comport
DVAR $found, $floor $delta $deltafast $Ax $Ay $Bx $By $Cx $Cy $Dx $Dy $Px $Py $posA $posB $posC $posD $posZ $fastfeed $midfeed $slowfeed $Astart $Bstart $Cstart $Dstart $Pstart $comma1 $comma2 $comma1plus $comma2plus
DVAR $Ax_dif $Ay_dif $Bx_dif $By_dif $Cx_dif $Cy_dif $Dx_dif $Dy_dif $Px_dif $Py_dif $zo_ref $nozzles $set_home $reference_nozzle 
DVAR $nozzle $nozzleA $nozzleB $nozzleC $nozzleD $profilometerRod $xStart $yStart $zStart 
DVAR $zMeasureA $zMeasureB $zMeasureC $zMeasureD $Az_dif $Bz_dif $Cz_dif $Dz_dif $xOffset $yOffset
DVAR $zA $zB $zC $zD $check
DVAR $zSweepRange $zSweepStep $numsteps $tempdistance $zDwell $count $z_dif $z_past $z_num $indicator $step $start $x_dist
DVAR $align_save
DVAR $comma1 $comma2 $comma3 $comma4 $comma1plus $comma2plus $comma3plus $comma1min $comma3min $alignment_file

;########### Duel Material Pressure ########################
DVAR $COM 
DVAR $COM2
DVAR $linepressure1 ; Pressure in PSI
DVAR $linepressure2 ; Pressure in PSI

;########### ??? very important ??? ########################
DVAR $heighta
DVAR $heightb
DVAR $heightc
DVAR $heightd


